---
title: Bake Particle System particles into a single mesh
tags: [Udon, Unity]
type: guide
created: 2022-01-14T05:47:00+04:00
source: "Jordo, Phasedragon"
---

You can bake the mesh generated by the particle system into a single mesh by doing the following

- Calling `BakeMesh()` on the particle renderer
- Saving it to a temporary mesh (which overrides it)
- Creating a new `CombineMeshInstance` with the results of the bake
- Using `CombineMeshes` on another temporary mesh to combine the new and the current objects
- Using `CombineMeshes` again to merge that temporary mesh into the final mesh again (since u canâ€™t use the mesh you are combining into as the source of the mesh data, u have to have another step)

> You will need to create the temporary meshes beforehand in something like blender, and make sure they have a 32 bit mesh index in import settings to avoid the 65k vertices limit per mesh

Example implementation

```cs
public Mesh targetMesh;
public Mesh tempMesh;
public Mesh bufferMesh;
public ParticleSystem ps;
public ParticleSystemRenderer psRenderer;

public void _BakeParticles() {
  psRenderer.BakeMesh(bufferMesh, true);
	ps.Clear();
  var combine = new CombineInstance[2];
  combine[0].mesh = bufferMesh;
  combine[1].mesh = targetMesh;
  // first merge to create a new "full mesh"
  tempMesh.CombineMeshes(combine, true, false, false);
  combine = new CombineInstance[1];
  combine[0].mesh = tempMesh;
  // second merge to push the mesh data back into the main mesh
  targetMesh.CombineMeshes(combine, true, false, false);
}
```

> To optimize the process you can also avoid the 2nd merge by just rotating the temp meshes around and swapping the mesh reference on the renderer every time u bake, if your situation requires merging a ton of particles